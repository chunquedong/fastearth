<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>mgpEarth Demo</title>
    <style>
      /* the canvas *must not* have any border or padding, or mouse coords will be wrong */
      canvas.emscripten {
        border: 0px none;
        padding: 0;
        margin: 0;
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
  <canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()"></canvas>
    <script type="text/javascript" src="mgpEarthApi.js"></script>
    <script type='text/javascript'>
      let w = window.innerWidth;
      let h = window.innerHeight;
      mgpEarthInit('canvas', w, h, function(mgpEarth){
          mgpEarth.addSkybox(1, 20000, Number.MAX_VALUE);
          mgpEarth.addSkybox(0, 0, 20000);

          let elevationUri = null;
          mgpEarth.addTileLayer("gd", "/gd?style=6&x={x}&y={y}&z={z}", elevationUri);

          
          mgpEarth.addEmptyGeoLayer("poi", 1, {
            "labelStyle": {
              "iconSize": 60,
              "iconImage": "res/image/m2.png",
              "labelAlign": 1,
              "iconColor": [1.0, 0.0, 0.0, 1.0],
              "sphereCulling": false
            }
          });
          mgpEarth.addGeoFeature("poi", 1, new Float32Array([108.964164, 34.218175, 100]), {id:"123",name:"test1"} );
          mgpEarth.addGeoFeature("poi", 1, new Float32Array([108.964164+0.1, 34.218175, 100]), {id:"124",name:"test2"} );
          mgpEarth.removeGeoFeature("poi", "id", "123");

          mgpEarth.addEmptyGeoLayer("line", 5, {
            //"queryElevation" : true,
            "lineStyle": {
              "lineWidth": 3,
              "depthTest": true
            },
            "polygonStyle": {
              "fillColor": [0.5,0.7,0.6,0.6]
            },
            "outlineHeightOffset": 0,
            "labelStyle": {
              "sphereCulling": false
            }
          });
          mgpEarth.addGeoFeature("line", 5, new Float32Array([
            108.964164, 34.218175, 500, 
            108.964164+0.1, 34.218175, 500, 
            108.964164, 34.218175+0.1, 500,
            108.964164, 34.218175, 500
          ]), {id:"123",name:"test1"} );

          mgpEarth.onPickNode = function(path, name, index, properties) {
              console.log("pick:"+name+"/"+index+": "+properties);
              return true;
          };

          mgpEarth.setPosition(108.964164, 34.218175, 8);
      });
   </script>
</body>
</html>